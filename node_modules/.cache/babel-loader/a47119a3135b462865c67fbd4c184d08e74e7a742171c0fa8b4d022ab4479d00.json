{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jesuszavala/Documents/dev/spotify-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jesuszavala/Documents/dev/spotify-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jesuszavala/Documents/dev/spotify-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"./App.css\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DEFAULT_TITLE=\"Versus My Playlist\";function App(){var CLIENT_ID=\"ad1d9256da1648fe842417e4533e59e8\";var REDIRECT_URI=\"https://jesuszvl.github.io/spotify-react\";var AUTH_ENDPOINT=\"https://accounts.spotify.com/authorize\";var RESPONSE_TYPE=\"token\";var SCOPE=\"playlist-read-private\";var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),playlists=_useState4[0],setPlaylists=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),versusPlaylist=_useState6[0],setVersusPlaylist=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tracks=_useState8[0],setTracks=_useState8[1];var _useState9=useState(DEFAULT_TITLE),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];useEffect(function(){var hash=window.location.hash;var token=window.localStorage.getItem(\"token\");if(!token&&hash){token=hash.substring(1).split(\"&\").find(function(elem){return elem.startsWith(\"access_token\");}).split(\"=\")[1];window.location.hash=\"\";window.localStorage.setItem(\"token\",token);}else{getUserPlaylists(token);}setToken(token);},[]);var logout=function logout(){setPlaylists([]);setToken(\"\");setTitle(DEFAULT_TITLE);window.localStorage.removeItem(\"token\");};var getUserPlaylists=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.spotify.com/v1/me/playlists\",{headers:{Authorization:\"Bearer \".concat(token)},params:{limit:50}});case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setPlaylists(data.items);setTitle(\"Chose one playlist to sort...\");case 6:case\"end\":return _context.stop();}}},_callee);}));return function getUserPlaylists(_x){return _ref.apply(this,arguments);};}();var renderPlaylists=function renderPlaylists(){return playlists.map(function(playlist){return/*#__PURE__*/_jsxs(\"div\",{className:\"spotify-playlist\",onClick:function onClick(){return onPlaylistClick(playlist.id);},children:[/*#__PURE__*/_jsx(\"img\",{className:\"playlist-image\",src:playlist.images[0].url,alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"playlist-title\",children:playlist.name})]},playlist.id);});};var onPlaylistClick=function onPlaylistClick(playlist){console.log(playlist);};var getPlaylistTracks=function getPlaylistTracks(playlistId){var _axios$get=axios.get(\"https://api.spotify.com/v1/playlists/2NzyWV9sT9rnKMncFHCkJG\",{headers:{Authorization:\"Bearer \".concat(token)},body:{uris:[]}}),data=_axios$get.data;};var onTrackClick=function onTrackClick(trackId){getPlaylistTracks();};var renderTracks=function renderTracks(){var max=tracks.length;var min=2;var a=Math.floor(Math.random()*(max-min+1))+min;return tracks.slice(a-2,a).map(function(track){return/*#__PURE__*/_jsxs(\"div\",{children:[track.track.album.images.length?/*#__PURE__*/_jsx(\"img\",{width:\"150px\",src:track.track.album.images[0].url,alt:\"\",onClick:onTrackClick(track.track.id)}):/*#__PURE__*/_jsx(\"div\",{children:\"No Image\"}),/*#__PURE__*/_jsx(\"p\",{children:track.track.name})]},track.track.id);});};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:title}),playlists&&token&&/*#__PURE__*/_jsx(\"div\",{className:\"playlists-container\",children:renderPlaylists()}),!token?/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(AUTH_ENDPOINT,\"?client_id=\").concat(CLIENT_ID,\"&redirect_uri=\").concat(REDIRECT_URI,\"&response_type=\").concat(RESPONSE_TYPE,\"&scope=\").concat(SCOPE),className:\"spotify-login\",children:\"Login with Spotify\"}):/*#__PURE__*/_jsx(\"button\",{className:\"spotify-logout\",onClick:logout,children:\"Logout\"})]})});}export default App;","map":{"version":3,"names":["useEffect","useState","axios","DEFAULT_TITLE","App","CLIENT_ID","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","SCOPE","token","setToken","playlists","setPlaylists","versusPlaylist","setVersusPlaylist","tracks","setTracks","title","setTitle","hash","window","location","localStorage","getItem","substring","split","find","elem","startsWith","setItem","getUserPlaylists","logout","removeItem","get","headers","Authorization","params","limit","data","items","renderPlaylists","map","playlist","onPlaylistClick","id","images","url","name","console","log","getPlaylistTracks","playlistId","body","uris","onTrackClick","trackId","renderTracks","max","length","min","a","Math","floor","random","slice","track","album"],"sources":["/Users/jesuszavala/Documents/dev/spotify-react/src/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./App.css\";\nimport axios from \"axios\";\n\nconst DEFAULT_TITLE = \"Versus My Playlist\";\n\nfunction App() {\n  const CLIENT_ID = \"ad1d9256da1648fe842417e4533e59e8\";\n  const REDIRECT_URI = \"https://jesuszvl.github.io/spotify-react\";\n  const AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\n  const RESPONSE_TYPE = \"token\";\n  const SCOPE = \"playlist-read-private\";\n\n  const [token, setToken] = useState(\"\");\n  const [playlists, setPlaylists] = useState([]);\n  const [versusPlaylist, setVersusPlaylist] = useState(\"\");\n  const [tracks, setTracks] = useState([]);\n  const [title, setTitle] = useState(DEFAULT_TITLE);\n\n  useEffect(() => {\n    const hash = window.location.hash;\n    let token = window.localStorage.getItem(\"token\");\n\n    if (!token && hash) {\n      token = hash\n        .substring(1)\n        .split(\"&\")\n        .find((elem) => elem.startsWith(\"access_token\"))\n        .split(\"=\")[1];\n\n      window.location.hash = \"\";\n      window.localStorage.setItem(\"token\", token);\n    } else {\n      getUserPlaylists(token);\n    }\n    setToken(token);\n  }, []);\n\n  const logout = () => {\n    setPlaylists([]);\n    setToken(\"\");\n    setTitle(DEFAULT_TITLE);\n    window.localStorage.removeItem(\"token\");\n  };\n\n  const getUserPlaylists = async (token) => {\n    const { data } = await axios.get(\n      \"https://api.spotify.com/v1/me/playlists\",\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        params: {\n          limit: 50,\n        },\n      }\n    );\n    setPlaylists(data.items);\n    setTitle(\"Chose one playlist to sort...\");\n  };\n\n  const renderPlaylists = () => {\n    return playlists.map((playlist) => {\n      return (\n        <div\n          className=\"spotify-playlist\"\n          key={playlist.id}\n          onClick={() => onPlaylistClick(playlist.id)}\n        >\n          <img className=\"playlist-image\" src={playlist.images[0].url} alt=\"\" />\n          <span className=\"playlist-title\">{playlist.name}</span>\n        </div>\n      );\n    });\n  };\n\n  const onPlaylistClick = (playlist) => {\n    console.log(playlist);\n  };\n\n  const getPlaylistTracks = (playlistId) => {\n    const { data } = axios.get(\n      \"https://api.spotify.com/v1/playlists/2NzyWV9sT9rnKMncFHCkJG\",\n      {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n        body: {\n          uris: [],\n        },\n      }\n    );\n  };\n\n  const onTrackClick = (trackId) => {\n    getPlaylistTracks();\n  };\n\n  const renderTracks = () => {\n    const max = tracks.length;\n    const min = 2;\n    const a = Math.floor(Math.random() * (max - min + 1)) + min;\n    return tracks.slice(a - 2, a).map((track) => (\n      <div key={track.track.id}>\n        {track.track.album.images.length ? (\n          <img\n            width={\"150px\"}\n            src={track.track.album.images[0].url}\n            alt=\"\"\n            onClick={onTrackClick(track.track.id)}\n          />\n        ) : (\n          <div>No Image</div>\n        )}\n        <p>{track.track.name}</p>\n      </div>\n    ));\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h2>{title}</h2>\n        {playlists && token && (\n          <div className=\"playlists-container\">{renderPlaylists()}</div>\n        )}\n        {!token ? (\n          <a\n            href={`${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}&scope=${SCOPE}`}\n            className=\"spotify-login\"\n          >\n            Login with Spotify\n          </a>\n        ) : (\n          <button className=\"spotify-logout\" onClick={logout}>\n            Logout\n          </button>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}